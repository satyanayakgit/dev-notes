[1. Git Commands](#10-git-commands)  
[2. Vercel Commands: blogr-prisma](#20-vercel-commands)  
[3. Amplification Tutorial Todo](#amplification-tutorial-todo)  
[4. Docker commnands](#docker-commands)  
[5. Amazon Clone](#amazon-clone)  
[6.All Cloned Projects](#airbnb)  
[7.zsh commands](#home)

# Home

      commands:

             export PS1 = "%F{green}%~ %F{yellow}$(date "+%Y-%m-%d %H:%M:%S")%F{reset} $ "
             export PS1="%F{green}%1~ %F{yellow}$(date "+%d-%b %H:%M:%S")%F{reset} $
             export PS1="%F{green}%1~ %F{yellow}$(date "+%d-%b")%t%F{reset} $ "

- For zsh you can open ~/.zshrc file and add the above line without export keyword and save. Then

      source ./zshrc

# 1.0 Git Commands

## 1.1 To push existing project into git

- First initialize the local directory with gitinit : git init
- add all the files to local git stage area : git add .
- check the status like : git status
- commit the added staged files to git final with a commmit message: git commits -m "final commit"
- connect to remote repository : git
- finally push the changes to git remote location : git push -u origin main
- next time when you make any change just do git push

  ### Code

Initial Commit

            git init
            git add .
            git status
            git commit -m "first commit"
            git remote add origin "https://github.com/satyanayakgit/blogr-prisma.git"

Set the Upstream

            git push -u origin main
            git push

Change Remote URL

          git remote set-url origin https://github.com/satyanayakgit/satya-nayak-blogr-prisma.git
          git remote -v
          git push

Merge Branches

      git fetch origin
      git merge origin/main

Compare branches

      git diff local-branch..origin/remote-branch
      git diff main..origin/main

## 1.2 To do the git setup using gitconfig (make a video on this)

### Requirement is to change the apple git setup to a new github account with different username and password

- delete the keychain values in Mac
- create a PAT(Personal Access token) in github account setting.
- set the global user name, user email id and credential name using git config command.
- do some github action like git push or git clone.
- When it asks for password, give the PAT generated by github. This will setup keychain with userid/pwd

### Code

    git config --global --list
    git config --list (repository specific config)

    git config --global user.name "satyanayakgit"
    git config --global user.email "satyanayak2040@gmail.com"
    git config --global credential.name "satyanayakgit"

    git config user.name "satyanayakgit"
    git config user.email "satyanayak2040@gmail.com"
    git config credential.username "satyanayakgit"

    git credential-osxkeychain erase
    git credential-osxkeychain get

# 2.0 Vercel Commands

- setup the stater project using example git location
- run and test the base application in local : `npm run dev`
- intiatilize git and commit the code to git location
- import the project in vercel and deploy it.
- browse the deployed application and test it.
- Create a vercel postgress database using `Storage` tab in vercel dashboard.
- install vercel CLI in local using this command: `npm i -g vercel@latest`
- pull the latest environment variables to the local project: `vercel env pull .env.local`
- rename the above file to .env or change it while pulling
- setup prisam ORM dev dependecies in local : `npm install prisma --save-dev`

## Code

    npx create-next-app --example https://github.com/prisma/blogr-nextjs-prisma/tree/main blogr-prisma
    cd blogr-nextjs-prisma && npm run dev
    npm i -g vercel@latest
    vercel env pull .env.local
    npm install prisma --save-dev
    npx prisma db push
    npx prisma studio
    npm install @prisma/client
    npx prisma generate
    npm install next@12.2.5 // this is requred as next-auth in the following command has dependency conflict
    npm install next-auth@4 @next-auth/prisma-adapter

# 3.0 Prisma Commands

```sh
npx prisma migrate reset
npx prisma migrate dev

npx prisma studio

npx prisma db push

npx prisma generate
```

# Isssues Fixed

- NextAuth not taking the signin page to Github provider
  Fix : Change the Vercel value from 1 to 0 in .env file. e.g. Vercel="0"
-

# Platform Starter Kit

## Code

npx create-next-app --example https://github.com/vercel/platforms platforms  
pnpm i && pnpm dev

# <a href="https://www.google.com/search?q=create+some+clone+site+using+nextjs&oq=create+some+clone+site+using+&gs_lcrp=EgZjaHJvbWUqBwgBECEYoAEyBggAEEUYOTIHCAEQIRigATIHCAIQIRigATIHCAMQIRigATIHCAQQIRigAdIBCTEzODE2ajBqN6gCALACAA&sourceid=chrome&ie=UTF-8" target="_blank">All Cloned Projects </a>

## Amazon

<a href="https://www.youtube.com/watch?v=vviFia-Stqk" target="_blank">
 <img src="http://img.youtube.com/vi/vviFia-Stqk/mqdefault.jpg" alt="Watch the video" width="240" height="180" border="10" />
</a>

## AirBnB

<a href="https://www.youtube.com/watch?v=nkmPmUpUM6U" target="_blank">
 <img src="http://img.youtube.com/vi/nkmPmUpUM6U/mqdefault.jpg" alt="Watch the video" width="240" height="180" border="10" />
</a>

# Amplification Tutorial Todo

### Code

1. Run below command in Todo-Amplication Direcory  
   `npx create-react-app web --skip-git`
2. Create a package.json in the 'Todo-Amplication' directory and add the below code.
   ```
        {
          "scripts": {
            "start": "npm --prefix web start",
            "postinstall": "npm i --prefix web"
          }
      }
   ```
3. create a .gitignore file and add the following.  
   `/node_modules `
4. Then run ` npm run start`
5. Make the coding of front end
6. commit to git repo
7. Do the setup in Amplication website and create the pull request
8. Merge the pull request to main
9. Run postinstall with the changes.  
   `"postinstall":  "npm i --prefix web && npm i --prefix server && npm i --prefix ui-admin"`
10. Run `npm run postinstall`
11. `npm install -D cross-env npm-run-all ` run this to run together react as well as amplication

# Docker Commands

      1. cd /path/to/getting-started-app

      2. touch Dockerfile

      3.
      # syntax=docker/dockerfile:1

      FROM node:18-alpine
      WORKDIR /app
      COPY . .
      RUN yarn install --production
      CMD ["node", "src/index.js"]
      EXPOSE 3000

      4. docker build -t getting-started .

      5. docker run -dp 127.0.0.1:3000:3000 getting-started

Modify, Build and Run again

      - docker ps
      - docker stop <the-container-id>
      - docker rm <the-container-id>
         or
        docker rm -f <the-container-id>

      - docker build -t getting-started .

Push the docker image to docker hub repository

      docker login -u satyanayakdocker
      docker tag getting-started satyanayakdocker/getting-started
      docker push satyanayakdocker/getting-started

Dokcer with (Volume mount and Bind Mount)

      docker volume create todo-db
      docker run -dp 127.0.0.1:3000:3000 --mount type=volume,src=todo-db,target=/etc/todos getting-started

      docker run -it --mount type=bind,src="$(pwd)",target=/src ubuntu bash

Development Container

      docker run -dp 127.0.0.1:3000:3000 \
                  -w /app --mount type=bind,src="$(pwd)",target=/app \
                  node:18-alpine \
                  sh -c "yarn install && yarn run dev"

      docker logs -f <container-id>

Multi-Container and Networking

      1. docker network create todo-app
      2. docker run -d  \
               --network todo-app --network-alias mysql \
               -v todo-mysql-data:/var/lib/mysql \
               -e MYSQL_ROOT_PASSWORD=secret \
               -e MYSQL_DATABASE=todos \
               mysql:8.0
      3. docker exec -it <mysql-container-id> mysql -u root -p
               mysql> show databases;
      4. docker run -it --network todo-app nicolaka/netshoot
               > dig mysql


      5. docker run -dp 127.0.0.1:3000:3000 \
               -w /app -v "$(pwd):/app" \
               --network todo-app \
               -e MYSQL_HOST=mysql \
               -e MYSQL_USER=root \
               -e MYSQL_PASSWORD=secret \
               -e MYSQL_DB=todos \
               node:18-alpine \
               sh -c "yarn install && yarn run dev"
      6. docker logs -f <container-id>

Docker Compose

- Sample compose.yaml file at root directory of the aplication

      services:
            app:
               image: node:18-alpine
               command: sh -c "yarn install && yarn run dev"
               ports:
                  - 127.0.0.1:3000:3000
               working_dir: /app
               volumes:
                     - ./:/app
               environment:
                     MYSQL_HOST: mysql
                     MYSQL_USER: root
                     MYSQL_PASSWORD: secret
                      MYSQL_DB: todos
            mysql:
               image: mysql:8.0
               volumes:
                      - todo-mysql-data:/var/lib/mysql
               environment:
                      MYSQL_ROOT_PASSWORD: secret
                      MYSQL_DATABASE: todos
      volumes:
            todo-mysql-data:

To run the docker comoose.yaml

      docker compose up -d
      or
      docker compose -f [FILE NAME] up -d

To see the logs of all containers

      docker compose logs -f
      docker compose logs -f app
      docker compose logs -f mysql

To tear it all down

      docker compose down

Image building tips

      docker image history getting-started

# POSTGRES set up

[Refer to this blog for PgAdmin setup](https://betterprogramming.pub/create-a-private-postgresql-database-for-your-development-environment-in-seconds-b781640ed01b)

      services:
            postgres:
                  image: postgres:15.4-alpine
                  container_name: postgres-con
                  restart: always
                  volumes:
                        - pgdata:/var/lib/postgresql/data
                  ports:
                        - 5432:5432
                  environment:
                        POSTGRES_PASSWORD: secret
            adminer:
                  image: adminer
                  container_name: adminer-con
                  restart: always
                  ports:
                        - 8080:8080
      volumes:
            pgdata:

To run the above file

      docker compose up -d

      docker exec -it postgres-con psql -U postgres

# Amazon Clone

[Go to Home](#home)

      1. npx create-next-app@latest amazon-next
      2. Remove the main component from src/pages/index.tsx and enter some text to test on localhost:3000.
      3. Remove everything from src/styles/globals.css excluding tailwind imports. Now we ger a clean application.
      4. Make Header.tsx in src/components/header/Header.tsx


      Code

            -     npm install react-icons --save
            -     npm i react-responsive-carousel
            -     npm install @reduxjs/toolkit react-redux
